{"ast":null,"code":"/**\n * @license Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module image/imageresize/resizeimagecommand\n */\n\nimport { Command } from 'ckeditor5/src/core';\n\n/**\n * The resize image command. Currently, it only supports the width attribute.\n *\n * @extends module:core/command~Command\n */\nexport default class ResizeImageCommand extends Command {\n  /**\n   * @inheritDoc\n   */\n  refresh() {\n    const editor = this.editor;\n    const imageUtils = editor.plugins.get('ImageUtils');\n    const element = imageUtils.getClosestSelectedImageElement(editor.model.document.selection);\n    this.isEnabled = !!element;\n    if (!element || !element.hasAttribute('width')) {\n      this.value = null;\n    } else {\n      this.value = {\n        width: element.getAttribute('width'),\n        height: null\n      };\n    }\n  }\n\n  /**\n   * Executes the command.\n   *\n   *\t\t// Sets the width to 50%:\n   *\t\teditor.execute( 'resizeImage', { width: '50%' } );\n   *\n   *\t\t// Removes the width attribute:\n   *\t\teditor.execute( 'resizeImage', { width: null } );\n   *\n   * @param {Object} options\n   * @param {String|null} options.width The new width of the image.\n   * @fires execute\n   */\n  execute(options) {\n    const editor = this.editor;\n    const model = editor.model;\n    const imageUtils = editor.plugins.get('ImageUtils');\n    const imageElement = imageUtils.getClosestSelectedImageElement(model.document.selection);\n    this.value = {\n      width: options.width,\n      height: null\n    };\n    if (imageElement) {\n      model.change(writer => {\n        writer.setAttribute('width', options.width, imageElement);\n      });\n    }\n  }\n}","map":{"version":3,"names":["Command","ResizeImageCommand","refresh","editor","imageUtils","plugins","get","element","getClosestSelectedImageElement","model","document","selection","isEnabled","hasAttribute","value","width","getAttribute","height","execute","options","imageElement","change","writer","setAttribute"],"sources":["C:/data/project/realproject/node_modules/@ckeditor/ckeditor5-image/src/imageresize/resizeimagecommand.js"],"sourcesContent":["/**\n * @license Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module image/imageresize/resizeimagecommand\n */\n\nimport { Command } from 'ckeditor5/src/core';\n\n/**\n * The resize image command. Currently, it only supports the width attribute.\n *\n * @extends module:core/command~Command\n */\nexport default class ResizeImageCommand extends Command {\n\t/**\n\t * @inheritDoc\n\t */\n\trefresh() {\n\t\tconst editor = this.editor;\n\t\tconst imageUtils = editor.plugins.get( 'ImageUtils' );\n\t\tconst element = imageUtils.getClosestSelectedImageElement( editor.model.document.selection );\n\n\t\tthis.isEnabled = !!element;\n\n\t\tif ( !element || !element.hasAttribute( 'width' ) ) {\n\t\t\tthis.value = null;\n\t\t} else {\n\t\t\tthis.value = {\n\t\t\t\twidth: element.getAttribute( 'width' ),\n\t\t\t\theight: null\n\t\t\t};\n\t\t}\n\t}\n\n\t/**\n\t * Executes the command.\n\t *\n\t *\t\t// Sets the width to 50%:\n\t *\t\teditor.execute( 'resizeImage', { width: '50%' } );\n\t *\n\t *\t\t// Removes the width attribute:\n\t *\t\teditor.execute( 'resizeImage', { width: null } );\n\t *\n\t * @param {Object} options\n\t * @param {String|null} options.width The new width of the image.\n\t * @fires execute\n\t */\n\texecute( options ) {\n\t\tconst editor = this.editor;\n\t\tconst model = editor.model;\n\t\tconst imageUtils = editor.plugins.get( 'ImageUtils' );\n\t\tconst imageElement = imageUtils.getClosestSelectedImageElement( model.document.selection );\n\n\t\tthis.value = {\n\t\t\twidth: options.width,\n\t\t\theight: null\n\t\t};\n\n\t\tif ( imageElement ) {\n\t\t\tmodel.change( writer => {\n\t\t\t\twriter.setAttribute( 'width', options.width, imageElement );\n\t\t\t} );\n\t\t}\n\t}\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,SAASA,OAAO,QAAQ,oBAAoB;;AAE5C;AACA;AACA;AACA;AACA;AACA,eAAe,MAAMC,kBAAkB,SAASD,OAAO,CAAC;EACvD;AACD;AACA;EACCE,OAAO,GAAG;IACT,MAAMC,MAAM,GAAG,IAAI,CAACA,MAAM;IAC1B,MAAMC,UAAU,GAAGD,MAAM,CAACE,OAAO,CAACC,GAAG,CAAE,YAAY,CAAE;IACrD,MAAMC,OAAO,GAAGH,UAAU,CAACI,8BAA8B,CAAEL,MAAM,CAACM,KAAK,CAACC,QAAQ,CAACC,SAAS,CAAE;IAE5F,IAAI,CAACC,SAAS,GAAG,CAAC,CAACL,OAAO;IAE1B,IAAK,CAACA,OAAO,IAAI,CAACA,OAAO,CAACM,YAAY,CAAE,OAAO,CAAE,EAAG;MACnD,IAAI,CAACC,KAAK,GAAG,IAAI;IAClB,CAAC,MAAM;MACN,IAAI,CAACA,KAAK,GAAG;QACZC,KAAK,EAAER,OAAO,CAACS,YAAY,CAAE,OAAO,CAAE;QACtCC,MAAM,EAAE;MACT,CAAC;IACF;EACD;;EAEA;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCC,OAAO,CAAEC,OAAO,EAAG;IAClB,MAAMhB,MAAM,GAAG,IAAI,CAACA,MAAM;IAC1B,MAAMM,KAAK,GAAGN,MAAM,CAACM,KAAK;IAC1B,MAAML,UAAU,GAAGD,MAAM,CAACE,OAAO,CAACC,GAAG,CAAE,YAAY,CAAE;IACrD,MAAMc,YAAY,GAAGhB,UAAU,CAACI,8BAA8B,CAAEC,KAAK,CAACC,QAAQ,CAACC,SAAS,CAAE;IAE1F,IAAI,CAACG,KAAK,GAAG;MACZC,KAAK,EAAEI,OAAO,CAACJ,KAAK;MACpBE,MAAM,EAAE;IACT,CAAC;IAED,IAAKG,YAAY,EAAG;MACnBX,KAAK,CAACY,MAAM,CAAEC,MAAM,IAAI;QACvBA,MAAM,CAACC,YAAY,CAAE,OAAO,EAAEJ,OAAO,CAACJ,KAAK,EAAEK,YAAY,CAAE;MAC5D,CAAC,CAAE;IACJ;EACD;AACD"},"metadata":{},"sourceType":"module"}